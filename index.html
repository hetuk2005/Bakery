<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./CSS/index.css">
    <link rel="stylesheet" href="./CSS/Sidebar.css">
    <link rel="shortcut icon" href="./utils/footer_Logo.svg"
      type="image/x-icon">
    <title>home page</title>

  </head>

  <body id="index_body">
    <header class="header"></header>

    <div id="pagination"></div>

    <div id="container"></div>

    <main></main>

    <footer id="footers"></footer>
  </body>
  <script src="./JS/index.js"></script>
  <script type="module">

    import { Navbar, NavStyle, Footers, goHome, loginFunc, cartFunc, SideBar, typePlaceholder, setActiveNav, avatarLoader,sortHigh, sortLow,dayNight} from './JS/import_export.js'


    document.querySelector('.header').innerHTML = Navbar() + SideBar();

   addEventListener('DOMContentLoaded', ()=> {typePlaceholder(),avatarLoader(),dayNight();});

    let styleTag = document.createElement("style");
    styleTag.textContent = NavStyle();
    document.head.append(styleTag);

    document.querySelector('#footers').innerHTML = Footers();

    document.querySelector('.homePage').addEventListener('click', () => {
        goHome();
    })
    document.querySelector('.loginFunc').addEventListener('click', () => {
        loginFunc();
    });
    document.querySelector('.cartFunc').addEventListener('click', () => {
        cartFunc();
    });
    // side bar code start.

    const body = document.body;
    const sidebar = document.getElementById('sidebar');
    const overlay = document.getElementById('overlay');
    const openBtn = document.getElementById('openSidebar');
    const closeBtn = document.getElementById('closeSidebar');




    function openSidebar() {
        body.classList.add('sidebar-open', 'no-scroll');
        sidebar.setAttribute('aria-hidden', 'false');
        openBtn.setAttribute('aria-expanded', 'true');
        // Move focus to the close button for accessibility
        closeBtn.focus();
    }

    function closeSidebar() {
        body.classList.remove('sidebar-open', 'no-scroll');
        sidebar.setAttribute('aria-hidden', 'true');
        openBtn.setAttribute('aria-expanded', 'false');
        // Return focus to the trigger button
        openBtn.focus();
    }



    openBtn.addEventListener('click', openSidebar);
    closeBtn.addEventListener('click', closeSidebar);
    overlay.addEventListener('click', closeSidebar);

    // Close with Escape
    window.addEventListener('keydown', (e) => {
        if (e.key === 'Escape' && body.classList.contains('sidebar-open')) {



            closeSidebar();
        }
    });

    // Optional: close if viewport resized very wide (e.g., moving to desktop layout in your project)
    window.addEventListener('resize', () => {
        if (window.innerWidth > 1280 && body.classList.contains('sidebar-open')) {
            closeSidebar();
        }
    });
    // side bar code end

    setTimeout(() => {
        setActiveNav();
    }, 100)


document.addEventListener("DOMContentLoaded", () => {
  const highBtn = document.querySelector("#filterHigh");
  const lowBtn = document.querySelector("#filterLow");

  function filterHigh(arr) {
    return [...arr].sort((a, b) => b.price - a.price);
  }

  function filterLow(arr) {
    return [...arr].sort((a, b) => a.price - b.price);
  }

  if (highBtn) {
    highBtn.addEventListener("click", () => {
      let filtered = filterHigh(allProductsGlobal);
      renderTheUI(filtered);

      // show span with close
      activeFilter.innerHTML = `<span class="high">High to Low <span style="cursor:pointer;" id="closeFilter">✕</span></span>`;

      // add close event
      document.querySelector("#closeFilter").addEventListener("click", () => {
        activeFilter.innerHTML = "";
        renderTheUI(allProducts); // reset to normal products
      });
    });
  }

  if (lowBtn) {
    lowBtn.addEventListener("click", () => {
      let filtered = filterLow(allProductsGlobal);
      renderTheUI(filtered);

      // show span with close
      activeFilter.innerHTML = `<span class="high">Low to High <span style="cursor:pointer;" id="closeFilter">✕</span></span>`;

      // add close event
      document.querySelector("#closeFilter").addEventListener("click", () => {
        activeFilter.innerHTML = "";
        renderTheUI(allProducts); // reset to normal products
      });
    });
  }
});

</script>

</html>